var C = {
    ASSETS:{
        NONE:0,
        BALL:1,
        BLOCK:3,
        WALL:5,
        GROUND:6,
        PLAYER:7,
        SHOT:8,
        PLATFORM:9
    },   
    GAMEMODE:
    {
        GETREADY:0,
        GO:1,
        INPLAY:2,
        LEVELENDING:3,
        LEVELEND:4,
        GAMEWON:5,
        GAMEOVER:6
    }
}

var GAMEOBJ = [
    {id:0,col:"#999"},{id:1,col:"#731"},{id:2,col:"#555"},
    {
        id:3, src:'player',
        s:0, t:C.ASSETS.BLOCK,
        w:32, h:32, d:2, f:0, r:0, dm:500
    },
    {
        id:4, src:'block32',
        s:0, t:C.ASSETS.BLOCK,
        w:32, h:32, d:16, f:0.2, r:0.2, dm:20
    },
    {
        id:5, src:'ice32',
        s:0, t:C.ASSETS.BLOCK,
        w:32, h:32, d:8, f:0.2, r:0.2, dm:10
    },
    {
        id:6, src:'crate32',
        s:0, t:C.ASSETS.BLOCK,
        w:32, h:32, d:12, f:0.2, r:0.2, dm:15
    },
    {
        id:7, src:'ground32',
        s:1, t:C.ASSETS.BLOCK,
        w:32, h:32, d:0, f:0.2, r:0.2, dm:0
    },
    {
        id:8, src:'log32l',
        s:1, t:C.ASSETS.BLOCK,
        w:32, h:32, d:0, f:0.2, r:0.2, dm:8
    },
    {
        id:9, src:'log32',
        s:1, t:C.ASSETS.BLOCK,
        w:32, h:32, d:0, f:0.2, r:0.2, dm:8
    },
    {
        id:10, src:'log32r',
        s:1, t:C.ASSETS.BLOCK,
        w:32, h:32, d:0, f:0.2, r:0.2, dm:8
    },
    {
        id:11, src:'shard1',
        s:0, t:C.ASSETS.BLOCK,
        w:32, h:16, d:8, f:0.2, r:0.2, dm:8
    },
    {
        id:12, src:'shard2',
        s:0, t:C.ASSETS.BLOCK,
        w:32, h:16, d:8, f:0.2, r:0.2, dm:8
    },
    {
        id:13, src:'rock32',
        s:0, t:C.ASSETS.BALL,
        w:16, h:16, d:8, f:0.8, r:0.8, dm:20
    },
    {
        id:14, src:'rock64',
        s:0, t:C.ASSETS.BALL,
        w:32, h:32, d:8, f:0.8, r:0.8, dm:20
    },
    {
        id:15, src:'rock16',
        s:0, t:C.ASSETS.BALL,
        w:16, h:16, d:8, f:0.8, r:0.8, dm:20
    },
    {
        id:16, src:'log10',
        s:0, t:C.ASSETS.BLOCK,
        w:160, h:16, d:16, f:0.2, r:0.2, dm:10
    },
    {
        id:17, src:'log16l',
        s:1, t:C.ASSETS.BLOCK,
        w:16, h:16, d:0, f:0.2, r:0.2, dm:10
    },
    {
        id:18, src:'log16',
        s:1, t:C.ASSETS.BLOCK,
        w:16, h:16, d:0, f:0.2, r:0.2, dm:10
    },
    {
        id:19, src:'log16r',
        s:1, t:C.ASSETS.BLOCK,
        w:16, h:16, d:0, f:0.2, r:0.2, dm:10
    },
];

class BlockFactory
{
    static Create(id, x, y, r, offset)
    {
        var obj = GAMEOBJ.find(o=>o.id == id);

        if(obj){   
            var b = null;               

            if(obj.t==C.ASSETS.BALL || obj.t==C.ASSETS.BALL){
                b =  new Circle(obj.t, obj.id, 
                    new Vector2(x+offset.x, y+offset.y), 
                    obj.w, obj.d, obj.f, obj.r, obj.dm);
            }
            else{
                b = new Rectangle(obj.t, obj.id, 
                    new Vector2(x+offset.x, y+offset.y), 
                    obj.w, obj.h, 
                    obj.d, 
                    obj.f, 
                    obj.r, obj.dm);  
            }

            if(r!=0){
                PHYSICS.rotateShape(b, r);
            }

            return b;
        }
    }
}

var FONT = {    
    'A': [
        [, 1, 0],
        [1, , 1],
        [1, 1, 1],
        [1, , 1],
        [1, , 1]
    ],
    'B': [
        [1, 1, 0],
        [1, , 1],
        [1, 1, 1],
        [1, , 1],
        [1, 1,0]
    ],
    'C': [
        [1, 1, 1],
        [1,0,0],
        [1,0,0],
        [1,0,0],
        [1, 1, 1]
    ],
    'D': [
        [1, 1,0],
        [1, , 1],
        [1, , 1],
        [1, , 1],
        [1, 1,0]
    ],
    'E': [
        [1, 1, 1],
        [1,0,0],
        [1, 1, 1],
        [1,0,0],
        [1, 1, 1]
    ],
    'F': [
        [1, 1, 1],
        [1,0,0],
        [1, 1,1],
        [1,0,0],
        [1,0,0]
    ],
    'G': [
        [, 1, 1,0],
        [1,0,0,0],
        [1, , 1, 1],
        [1, , , 1],
        [, 1, 1,0]
    ],
    'H': [
        [1, , 1],
        [1, , 1],
        [1, 1, 1],
        [1, , 1],
        [1, , 1]
    ],
    'I': [
        [1, 1, 1],
        [, 1,0],
        [, 1,0],
        [, 1,0],
        [1, 1, 1]
    ],
    'J': [
        [1, 1, 1],
        [, , 1],
        [, , 1],
        [1, , 1],
        [1, 1, 1]
    ],
    'K': [
        [1, , , 1],
        [1, , 1,0],
        [1, 1,0,0],
        [1, , 1,0],
        [1, , , 1]
    ],
    'L': [
        [1,0,0],
        [1,0,0],
        [1,0,0],
        [1,0,0],
        [1, 1, 1]
    ],
    'M': [
        [1,1,1,1],
        [1,0,1,1],
        [1,0,1,1],
        [1,0,0,1],
        [1,0,0,1]
    ],
    'N': [
        [1, , , 1],
        [1, 1, , 1],
        [1, , 1, 1],
        [1, , , 1],
        [1, , , 1]
    ],
    'O': [
        [1, 1, 1],
        [1, , 1],
        [1, , 1],
        [1, , 1],
        [1, 1, 1]
    ],
    'P': [
        [1, 1, 1],
        [1, , 1],
        [1, 1, 1],
        [1,0,0],
        [1,0,0]
    ],
    'Q': [
        [0, 1, 1,0],
        [1, , , 1],
        [1, , , 1],
        [1, , 1, 1],
        [1, 1, 1, 1]
    ],
    'R': [
        [1, 1,0],
        [1, , 1],
        [1, , 1],
        [1, 1,0],
        [1, , 1]
    ],
    'S': [
        [1, 1, 1],
        [1,0,0],
        [1, 1, 1],
        [, , 1],
        [1, 1, 1]
    ],
    'T': [
        [1,1,1],
        [,1,0],
        [,1,0],
        [,1,0],
        [,1,0]
    ],
    'U': [
        [1,,1],
        [1,,1],
        [1,,1],
        [1,,1],
        [1,1,1]
    ],
    'V': [
        [1,,1],
        [1,,1],
        [1,,1],
        [1,,1],
        [0,1,0]
    ],
    'W': [
        [1,,,1],
        [1,,,1],
        [1,,,1],
        [1,,1,1],
        [1,1,1,1]
    ],
    'X': [
        [1,0,1],
        [1,0,1],
        [0,1,0],
        [1,0,1],
        [1,0,1]
    ],
    'Y': [
        [1, , 1],
        [1, , 1],
        [, 1,0],
        [, 1,0],
        [, 1,0]
    ],
    'Z': [
        [1, 1, 1],
        [, , 1],
        [, 1,0],
        [1,0,0],
        [1, 1, 1]
    ],
    '0': [
        [1,1,1],
        [1,,1],
        [1,,1],
        [1,,1],
        [1,1,1]
    ],
    '1': [
        [,1,0],
        [,1,0],
        [,1,0],
        [,1,0],
        [,1,0]
    ],
    '2': [
        [1,1,1],
        [0,0,1],
        [1,1,1],
        [1,0,0],
        [1,1,1]
    ],
    '3':[
        [1,1,1],
        [0,0,1],
        [1,1,1],
        [0,0,1],
        [1,1,1]
    ],
    '4':[
        [1,0,1],
        [1,0,1],
        [1,1,1],
        [0,0,1],
        [0,0,1]
    ],
    '5':[
        [1,1,1],
        [1,0,0],
        [1,1,1],
        [0,0,1],
        [1,1,1]
    ],
    '6':[
        [1,1,1],
        [1,0,0],
        [1,1,1],
        [1,0,1],
        [1,1,1]
    ],
    '7':[
        [1,1,1],
        [0,0,1],
        [0,0,1],
        [0,0,1],
        [0,0,1]
    ],
    '8':[
        [1,1,1],
        [1,0,1],
        [1,1,1],
        [1,0,1],
        [1,1,1]
    ],
    '9':[
        [1,1,1],
        [1,0,1],
        [1,1,1],
        [0,0,1],
        [1,1,1]
    ],
    '/': [
        [,,,,1],
        [,,,1,],
        [,,1,,],
        [,1,,,],
        [1,,,,]
    ],
    '[': [
        [,1,1],
        [,1,],
        [,1,],
        [,1,],
        [,1,1]
    ],
    ']': [
        [1,1,],
        [,1,],
        [,1,],
        [,1,],
        [1,1,]
    ],
    ' ': [
        [,,],
        [,,],
        [,,],
        [,,],
        [,,]
    ],
    '?': [
        [1,1,1],
        [1,0,1],
        [0,1,1],
        [0,1,0],
        [0,1,0]
    ],
    '.': [
        [,,],
        [,,],
        [,,],
        [,,],
        [,1,]
    ],
    'Â£': [
        [0,1,1],
        [0,1,],
        [1,1,1],
        [0,1,0],
        [1,1,1]
    ],
    '+': [
        [0,0,0],
        [0,1,0],
        [1,1,1],
        [0,1,0],
        [0,0,0]
    ],
    '-': [
        [0,0,0],
        [0,0,0],
        [1,1,1],
        [0,0,0],
        [0,0,0]
    ],
    '|':
    []  //CR
};
